"use strict";(function(n){function t(n){this.element=n}function i(t){this.items=[];this.itemTemplate='<tr data-id="{data-id}"><td>{email}<\/td><td>{created}<\/td><td>{billingoption}<\/td><td>{price}<\/td><td>{status}<\/td><td>{action}<\/td><\/tr>';this.element=n("#"+t)}var r=new i("accountList");t.prototype.displayNone=function(){this.resetClass(this.element.get(0),"")};t.prototype.displayNew=function(){this.resetClass(this.element.get(0),"fa fa-circle text-danger")};t.prototype.displayError=function(){this.resetClass(this.element.get(0),"fa fa-exclamation-circle")};t.prototype.displayLoading=function(){this.resetClass(this.element.get(0),"fa fa-spinner fa-pulse fa-fw")};t.prototype.displaySuccess=function(){this.resetClass(this.element.get(0),"fa fa-circle text-success")};t.prototype.resetClass=function(n,t){n.className=t};i.prototype.activateAccount=function(i){var e=n(i).parents("tr"),r=e.attr("data-id"),u=new ErrorHandler(n("#account-list-info")),f=new t(this.element.find("td:eq(4) i")),o=this;r&&r.length>0&&(n(i).hide(),n.ajax({url:"/App/api/accountlist/",method:"PUT",data:{id:r,isActive:!0}}).done(function(){f.displaySuccess();u.displayMessage("success","Time log saved successfully");n(i).remove()}).error(function(t,r,e){if(f.displayError(),t.responseText){var o=n.parseJSON(t.responseText);u.displayMessage("error",o.errorDescription?o.errorDescription:o.Message)}else u.displayMessage("error",e);n(i).show()}))};i.prototype.clearItems=function(){n("tbody tr",this.element).remove();this.items=[]};i.prototype.createItems=function(i){var r=this;n(i).each(function(){var u={"{data-id}":this.id,"{email}":this.email,"{created}":this.created,"{billingoption}":this.billingoption,"{price}":this.price,"{action}":'<button class="action-activate"><i class="fa fa-check"><\/i><\/button>',"{status}":"<i><\/i>"},f=new TemplateFormatter(u),i;n("tbody",r.element).append(f.format(r.itemTemplate));i=new t(r.element.find("tr[data-id="+this.id+"] td:eq(4) i"));i.displayNew()})};i.prototype.init=function(){if(this.element){this.clearItems();this.loadInactive();var t=this;n("tbody",this.element).on("click","tr .action-activate",function(){t.activateAccount(this)})}};i.prototype.loadInactive=function(t){var i=this,r=new ErrorHandler(n("#account-list-info"));n.get("/App/api/accountlist",{accounttype:"I"}).success(function(n){i.clearItems();i.createItems(n.accounts);t&&t()}).fail(function(i){i.responseText?r.displayMessage("error",n.parseJSON(i.responseText).errorDescription):r.displayMessage("error",i.statusText);t&&t()})};n(document).ready(function(){r.init()})})(jQuery);